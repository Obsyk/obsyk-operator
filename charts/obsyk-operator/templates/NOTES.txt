Thank you for installing {{ .Chart.Name }}!

{{- if .Values.agent.enabled }}

Your Obsyk agent has been configured with:
  - Cluster Name: {{ .Values.agent.clusterName }}
  - Platform URL: {{ .Values.agent.platformURL }}

{{- if and .Values.agent.clientId .Values.agent.privateKey }}
The credentials secret "{{ .Values.agent.credentialsSecretRef.name }}" has been created automatically.
{{- else }}
IMPORTANT: Create the OAuth2 credentials secret before the agent can connect.

Option A: Reinstall with inline credentials (recommended):

   helm upgrade obsyk-operator obsyk/obsyk-operator \
     --namespace {{ .Release.Namespace }} \
     --set agent.clusterName={{ .Values.agent.clusterName | quote }} \
     --set agent.clientId="YOUR_CLIENT_ID" \
     --set-file agent.privateKey=private-key.pem

Option B: Create secret manually:

   kubectl create secret generic {{ .Values.agent.credentialsSecretRef.name }} \
     --namespace {{ .Release.Namespace }} \
     --from-literal=client_id=YOUR_CLIENT_ID \
     --from-file=private_key=private-key.pem
{{- end }}

To check the agent status:

  kubectl get obsykagent -n {{ .Release.Namespace }}

To view operator logs:

  kubectl logs -n {{ .Release.Namespace }} -l app.kubernetes.io/name={{ include "obsyk-operator.name" . }}

{{- else }}

The operator is installed but no ObsykAgent has been created.

To create an agent manually:

  cat <<EOF | kubectl apply -f -
  apiVersion: obsyk.io/v1
  kind: ObsykAgent
  metadata:
    name: obsyk-agent
    namespace: {{ .Release.Namespace }}
  spec:
    platformURL: "https://api.obsyk.ai"
    clusterName: "your-cluster-name"
    credentialsSecretRef:
      name: obsyk-credentials
  EOF

{{- end }}

For more information, visit: https://docs.obsyk.ai
