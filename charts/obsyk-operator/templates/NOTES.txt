Thank you for installing {{ .Chart.Name }}!

{{- if .Values.agent.enabled }}

Your Obsyk agent has been configured with:
  - Cluster Name: {{ .Values.agent.clusterName }}
  - Platform URL: {{ .Values.agent.platformURL }}

IMPORTANT: Make sure you have created the OAuth2 credentials secret.

1. Generate ECDSA P-256 key pair (if not already done):

   openssl ecparam -name prime256v1 -genkey -noout -out private-key.pem
   openssl ec -in private-key.pem -pubout -out public-key.pem

2. Upload public key to platform UI and get your client_id

3. Create the credentials secret:

   kubectl create secret generic {{ .Values.agent.credentialsSecretRef.name }} \
     --namespace {{ .Release.Namespace }} \
     --from-literal=client_id=YOUR_CLIENT_ID \
     --from-file=private_key=private-key.pem

To check the agent status:

  kubectl get obsykagent -n {{ .Release.Namespace }}

To view operator logs:

  kubectl logs -n {{ .Release.Namespace }} -l app.kubernetes.io/name={{ include "obsyk-operator.name" . }}

{{- else }}

The operator is installed but no ObsykAgent has been created.

To create an agent manually:

  cat <<EOF | kubectl apply -f -
  apiVersion: obsyk.io/v1
  kind: ObsykAgent
  metadata:
    name: obsyk-agent
    namespace: {{ .Release.Namespace }}
  spec:
    platformURL: "https://api.obsyk.ai"
    clusterName: "your-cluster-name"
    credentialsSecretRef:
      name: obsyk-credentials
  EOF

{{- end }}

For more information, visit: https://docs.obsyk.ai
